<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chronograph — Sports Watch</title>
  <style>
    :root{
      --bg:#0b0f14;           /* dial */
      --bezel:#0a0d10;        /* outer ring */
      --metal:#1b222b;        /* markers */
      --accent:#e33a3a;       /* chrono seconds */
      --accent-2:#2aa7ff;     /* details */
      --text:#e8eef5;         /* labels */
      --muted:#9fb2c9;
      --glass:rgba(255,255,255,.06);
      --shadow:rgba(0,0,0,.55);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:#0b0f14}
    body{display:grid;place-items:center;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,"Helvetica Neue",Arial}

    .wrap{width:min(92vmin,720px);aspect-ratio:1/1;position:relative;}

    /* Bezel (outer case) */
    .bezel{position:absolute;inset:0;border-radius:50%;
      background:radial-gradient(circle at 30% 30%, #1a232e, #0b0f14 60%),
                 conic-gradient(from 0deg, #12161d, #0c1016 30deg, #0d1118 120deg, #12161d 240deg, #0c1016 300deg, #12161d 360deg);
      box-shadow:0 20px 60px var(--shadow), inset 0 4px 14px rgba(255,255,255,.06), inset 0 -6px 20px rgba(0,0,0,.7);
    }

    /* Inner dial container for the SVG */
    svg{position:absolute;inset:2.6%;width:94.8%;height:94.8%;display:block;border-radius:50%;
      background:radial-gradient(circle at 50% 46%, #0c1117, #080c12 62%, #060a0f 100%);
      box-shadow:inset 0 0 60px rgba(0,0,0,.65), inset 0 0 160px rgba(0,0,0,.5);
    }

    /* Crystal glare */
    .glare{position:absolute;inset:0;border-radius:50%;pointer-events:none;
      background:radial-gradient(120% 60% at 10% 0%, rgba(255,255,255,.14), transparent 42%),
                 radial-gradient(90% 70% at 100% 10%, rgba(255,255,255,.06), transparent 38%),
                 radial-gradient(60% 40% at 70% 90%, rgba(255,255,255,.03), transparent 50%);
      mix-blend-mode:screen;
    }

    /* Crown & pushers (decorative & clickable) */
    .pusher{position:absolute;top:22%;right:-3.6%;width:5%;height:9%;border-radius:16px;background:linear-gradient(#2a313a,#141a22);
      box-shadow:0 6px 14px var(--shadow), inset 0 1px 0 rgba(255,255,255,.08);
      cursor:pointer;display:grid;place-items:center;color:var(--muted);font-size:.7rem;user-select:none}
    .p-top{top:22%}
    .p-mid{top:45.5%}
    .p-btm{top:69%}

    /* Labels */
    .brand{position:absolute;left:50%;top:31%;transform:translate(-50%,-50%); color:var(--text); letter-spacing:.22em; font-weight:600; font-size:.9rem; opacity:.9; text-shadow:0 1px 0 rgba(0,0,0,.6)}
    .model{position:absolute;left:50%;top:38.5%;transform:translate(-50%,-50%); color:var(--muted); font-size:.68rem; opacity:.85}
    .tachy{position:absolute;left:50%;top:7%;transform:translate(-50%,-50%); color:var(--muted); font-size:.62rem; letter-spacing:.34em; opacity:.8}

    /* Bottom controls (fallback if pushers aren’t used) */
    .controls{position:absolute;left:50%;bottom:-64px;transform:translateX(-50%);display:flex;gap:.6rem;flex-wrap:wrap;justify-content:center}
    .btn{appearance:none;border:0;border-radius:999px;padding:.6rem 1rem;background:#141a22;color:#c8d6e5;cursor:pointer;
         box-shadow:0 6px 16px var(--shadow), inset 0 1px 0 rgba(255,255,255,.06);font-weight:600}
    .btn:active{transform:translateY(1px)}

    /* Lap list */
    .laps{position:absolute;right:-260px;top:0;width:240px;max-height:100%;overflow:auto;padding:8px 0}
    .lap{display:flex;justify-content:space-between;gap:.5rem;padding:.35rem .6rem;margin:.25rem 0;background:#0f141b;border-radius:10px;color:#dfe9f5;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,"Liberation Mono","Courier New",monospace; font-size:.82rem; box-shadow:0 6px 14px var(--shadow)}
    .lap small{color:var(--muted)}
    @media (max-width:980px){.laps{position:static;width:100%;display:flex;flex-direction:column;margin-top:14px}}

    /* Accessibility hint */
    .hint{position:absolute;left:50%;bottom:-94px;transform:translateX(-50%);color:#7f93ad;font-size:.75rem;opacity:.9}
  </style>
</head>
<body>
  <div class="wrap" role="group" aria-label="Chronograph">
    <div class="bezel" aria-hidden="true"></div>

    <!-- Decorative pushers (also functional) -->
    <div class="pusher p-top" id="btn-start" title="Start/Stop (Space)">▶︎</div>
    <div class="pusher p-mid" id="btn-lap" title="Lap (L)">LAP</div>
    <div class="pusher p-btm" id="btn-reset" title="Reset (R)">↺</div>

    <div class="brand">CORSAIR LAB</div>
    <div class="model">CHRONOGRAPH • 200m</div>
    <div class="tachy">TACHYMETER</div>

    <svg viewBox="0 0 400 400" aria-hidden="true">
      <!-- Chapter ring / minute track -->
      <defs>
        <filter id="drop">
          <feGaussianBlur in="SourceAlpha" stdDeviation="1.2"/>
          <feOffset dx="0" dy="1"/>
          <feComponentTransfer>
            <feFuncA type="linear" slope="0.35"/>
          </feComponentTransfer>
          <feMerge>
            <feMergeNode/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
      </defs>

      <!-- Outer hash marks -->
      <g id="marks">
        <circle cx="200" cy="200" r="185" fill="none" stroke="#10161e" stroke-width="14"/>
        <circle cx="200" cy="200" r="176" fill="none" stroke="#0e131a" stroke-width="6"/>
        <g id="tickSet"></g>
      </g>

      <!-- Subdials -->
      <g id="subdials" filter="url(#drop)">
        <!-- Minutes @ 3 o'clock -->
        <g id="sd-min" transform="translate(285,200)">
          <circle r="56" fill="#0e141c" stroke="#1a232e" stroke-width="3"/>
          <g id="sd-min-marks"></g>
          <line id="hand-min" x1="0" y1="0" x2="0" y2="-38" stroke="#cfe2ff" stroke-width="3" stroke-linecap="round"/>
          <circle r="4" fill="#cfe2ff"/>
          <text x="0" y="20" text-anchor="middle" fill="#9fb2c9" font-size="8" letter-spacing="2">MIN</text>
        </g>

        <!-- Hours @ 6 o'clock -->
        <g id="sd-hr" transform="translate(200,285)">
          <circle r="56" fill="#0e141c" stroke="#1a232e" stroke-width="3"/>
          <g id="sd-hr-marks"></g>
          <line id="hand-hr" x1="0" y1="0" x2="0" y2="-38" stroke="#cfe2ff" stroke-width="3" stroke-linecap="round"/>
          <circle r="4" fill="#cfe2ff"/>
          <text x="0" y="20" text-anchor="middle" fill="#9fb2c9" font-size="8" letter-spacing="2">HOUR</text>
        </g>

        <!-- Running small seconds @ 9 (decorative when stopped) -->
        <g id="sd-sec" transform="translate(115,200)">
          <circle r="56" fill="#0e141c" stroke="#1a232e" stroke-width="3"/>
          <g id="sd-sec-marks"></g>
          <line id="hand-sec" x1="0" y1="6" x2="0" y2="-40" stroke="#9ad0ff" stroke-width="2.5" stroke-linecap="round"/>
          <circle r="4" fill="#9ad0ff"/>
          <text x="0" y="20" text-anchor="middle" fill="#9fb2c9" font-size="8" letter-spacing="2">SEC</text>
        </g>
      </g>

      <!-- Center pinion -->
      <circle cx="200" cy="200" r="6.5" fill="#cfe2ff"/>

      <!-- Chrono central seconds hand -->
      <g id="chrono-hand" transform="translate(200,200)">
        <line id="hand-chrono" x1="0" y1="8" x2="0" y2="-160" stroke="var(--accent)" stroke-width="2.8" stroke-linecap="round"/>
        <circle r="4.2" fill="var(--accent)"/>
      </g>

      <!-- Applied hour markers -->
      <g id="hours"></g>

      <!-- Logo appliqué -->
      <g transform="translate(200,120)" opacity=".9">
        <rect x="-42" y="-12" width="84" height="24" rx="8" fill="#121821" stroke="#1f2834"/>
        <text x="0" y="6" text-anchor="middle" fill="#dfe9f6" font-size="12" letter-spacing="3">OPULENT HARDWARE</text>
      </g>

    </svg>

    <div class="glare"></div>

    <!-- Fallback controls -->
    <div class="controls" aria-label="Controls">
      <button class="btn" id="btnStartStop">Start / Stop (Space)</button>
      <button class="btn" id="btnLap">Lap (L)</button>
      <button class="btn" id="btnReset">Reset (R)</button>
    </div>

    <div class="hint">Keyboard: Space = start/stop • L = lap • R = reset</div>
  </div>

  <div class="laps" id="laps" aria-live="polite" aria-label="Lap times"></div>

  <script>
    // ===== Utility math =====
    const deg = a => a * (180/Math.PI);
    const rad = a => a * (Math.PI/180);

    // ===== Build dial ticks dynamically =====
    const tickSet = document.getElementById('tickSet');
    for(let i=0;i<60;i++){
      const ang = rad(i*6);
      const cos = Math.cos(ang), sin = Math.sin(ang);
      const rOuter = 176, rInner = i%5===0? 165 : 170;
      const x1 = 200 + rOuter * Math.sin(ang);
      const y1 = 200 - rOuter * Math.cos(ang);
      const x2 = 200 + rInner * Math.sin(ang);
      const y2 = 200 - rInner * Math.cos(ang);
      const line = document.createElementNS('http://www.w3.org/2000/svg','line');
      line.setAttribute('x1',x1); line.setAttribute('y1',y1);
      line.setAttribute('x2',x2); line.setAttribute('y2',y2);
      line.setAttribute('stroke', i%5===0? '#cfe2ff':'#6f8198');
      line.setAttribute('stroke-width', i%5===0? '3':'1.2');
      line.setAttribute('stroke-linecap','round');
      tickSet.appendChild(line);
    }

    // Applied hour markers
    const hours = document.getElementById('hours');
    for(let h=0;h<12;h++){
      const angle = rad(h*30);
      const r = 150;
      const x = 200 + r * Math.sin(angle);
      const y = 200 - r * Math.cos(angle);
      const w = h%3===0? 18:12, ht = 6;
      const rect = document.createElementNS('http://www.w3.org/2000/svg','rect');
      rect.setAttribute('x', x - w/2); rect.setAttribute('y', y - ht/2);
      rect.setAttribute('width', w); rect.setAttribute('height', ht);
      rect.setAttribute('rx', 3);
      rect.setAttribute('fill', '#e8f1ff');
      rect.setAttribute('opacity', h===0?1:.9);
      hours.appendChild(rect);
    }

    // Subdial marks
    function buildSubMarks(groupId, big=5, small=1, steps=60){
      const g = document.getElementById(groupId);
      for(let i=0;i<steps;i++){
        const a = rad(i*(360/steps));
        const rOut = 48, rIn = i%(steps/12)===0? 38: 43;
        const x1 = Math.sin(a)*rOut, y1 = -Math.cos(a)*rOut;
        const x2 = Math.sin(a)*rIn,  y2 = -Math.cos(a)*rIn;
        const line = document.createElementNS('http://www.w3.org/2000/svg','line');
        line.setAttribute('x1',x1); line.setAttribute('y1',y1);
        line.setAttribute('x2',x2); line.setAttribute('y2',y2);
        line.setAttribute('stroke', (i%(steps/12)===0)? '#cfe2ff':'#7b8da3');
        line.setAttribute('stroke-width', (i%(steps/12)===0)? big: small);
        line.setAttribute('stroke-linecap','round');
        g.appendChild(line);
      }
    }
    buildSubMarks('sd-min-marks', 2.4, 1.2, 60);
    buildSubMarks('sd-hr-marks', 2.4, 1.2, 12);
    buildSubMarks('sd-sec-marks', 2.0, 1.0, 60);

    // ===== Chronograph engine =====
    let running = false;
    let rafId = null;
    let startTime = 0;            // performance.now() when started
    let accumulated = 0;          // ms while previously running

    const chrono = document.getElementById('hand-chrono');
    const minHand = document.getElementById('hand-min');
    const hrHand  = document.getElementById('hand-hr');
    const secHand = document.getElementById('hand-sec');

    function setRotate(el, deg){
      el.setAttribute('transform', `rotate(${deg})`);
    }

    function formatTime(ms){
      const total = Math.floor(ms);
      const h = Math.floor(total/3_600_000);
      const m = Math.floor((total%3_600_000)/60_000);
      const s = Math.floor((total%60_000)/1000);
      const cs = Math.floor((total%1000)/10); // centiseconds
      return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}.${String(cs).padStart(2,'0')}`;
    }

    const lapsEl = document.getElementById('laps');
    let lapCount = 0;
    function addLap(ms){
      lapCount++;
      const row = document.createElement('div');
      row.className = 'lap';
      row.innerHTML = `<small>#${lapCount}</small><span>${formatTime(ms)}</span>`;
      lapsEl.prepend(row);
    }

    function animate(){
      const now = performance.now();
      const elapsed = accumulated + (now - startTime);

      // Central chrono seconds: full 360° each 60s (smooth sweep)
      const secAngle = (elapsed % 60_000) / 60_000 * 360;
      setRotate(chrono, secAngle);

      // Minute totalizer @ 3: advances continuously up to 60 min
      const minAngle = (elapsed / 60_000) % 60 / 60 * 360;
      setRotate(minHand, minAngle);

      // Hour totalizer @ 6: up to 12 hours
      const hrAngle = (elapsed / 3_600_000) % 12 / 12 * 360;
      setRotate(hrHand, hrAngle);

      // Running small seconds @ 9 (decorative sweep, paused when stopwatch stopped)
      const small = (elapsed % 1000) / 1000 * 360;
      setRotate(secHand, small);

      rafId = requestAnimationFrame(animate);
    }

    function start(){
      if(running) return;
      running = true;
      startTime = performance.now();
      rafId = requestAnimationFrame(animate);
    }
    function stop(){
      if(!running) return;
      running = false;
      cancelAnimationFrame(rafId);
      accumulated += performance.now() - startTime;
      // Keep the running small seconds frozen where it stopped
    }
    function reset(){
      running = false;
      cancelAnimationFrame(rafId);
      accumulated = 0; startTime = 0;
      setRotate(chrono, 0);
      setRotate(minHand, 0);
      setRotate(hrHand, 0);
      setRotate(secHand, 0);
      lapsEl.innerHTML = '';
      lapCount = 0;
    }

    // ===== Controls & accessibility =====
    const btnStartStop = document.getElementById('btnStartStop');
    const btnLap = document.getElementById('btnLap');
    const btnReset = document.getElementById('btnReset');

    function toggle(){ running? stop(): start(); }

    btnStartStop.addEventListener('click', toggle);
    btnLap.addEventListener('click', ()=>{ if(accumulated>0 || running){ const now = running? accumulated + (performance.now()-startTime): accumulated; addLap(now); } });
    btnReset.addEventListener('click', reset);

    // Side pushers mirror the controls
    document.getElementById('btn-start').addEventListener('click', toggle);
    document.getElementById('btn-lap').addEventListener('click', ()=> btnLap.click());
    document.getElementById('btn-reset').addEventListener('click', reset);

    // Keyboard shortcuts
    window.addEventListener('keydown', (e)=>{
      if(e.code==='Space'){ e.preventDefault(); toggle(); }
      if(e.key==='l' || e.key==='L'){ e.preventDefault(); btnLap.click(); }
      if(e.key==='r' || e.key==='R'){ e.preventDefault(); reset(); }
    });

    // Prefer reduced motion users: fall back to stepped updates (10Hz)
    const media = matchMedia('(prefers-reduced-motion: reduce)');
    if(media.matches){
      // Override animate with stepped version
      cancelAnimationFrame(rafId);
      function stepped(){
        if(!running) return;
        const now = performance.now();
        const elapsed = accumulated + (now - startTime);
        const secAngle = Math.floor((elapsed % 60_000) / 100) / 600 * 360; // 10Hz
        setRotate(chrono, secAngle);
        const minAngle = (elapsed / 60_000) % 60 / 60 * 360; setRotate(minHand, minAngle);
        const hrAngle  = (elapsed / 3_600_000) % 12 / 12 * 360; setRotate(hrHand, hrAngle);
        setRotate(secHand, Math.floor((elapsed % 1000)/100)/10*360);
        setTimeout(stepped, 100);
      }
      start = function(){ if(running) return; running=true; startTime=performance.now(); stepped(); };
    }
  </script>
</body>
</html>
